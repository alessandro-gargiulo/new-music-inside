<audio controls #playerRef
       (durationchange)="updateDuration()"
       (timeupdate)="updatePosition()"
       style="display: none">
  <source src="" type=""> Your browser does not support the audio element.
</audio>

<main ontouchstart>
  <div class='player-container'>
    <div class='player' [ngClass]="{'playlist' : isPlaylist}">
      <div class='back'>
        <header>
          <div>
            <a (click)="togglePlaylist()">&lsaquo;</a>
          </div>
          <div>Up Next</div>
        </header>
        <ol class="playlist-container">
          <li *ngFor="let track of playlist; let i = index">
            <a>
              <img [src]="track.coverUrl">
              <div>
                <div class="track-title">{{track.title}}</div>
                <div class="track-artist">{{track.artist}}</div>
              </div>
              <span class="trash-icon" (click)="removeFromPlaylist(i)">
                <svg viewBox="0 0 24 24">
                  <path d="M 10 2 L 9 3 L 4 3 L 4 5 L 7 5 L 17 5 L 20 5 L 20 3 L 15 3 L 14 2 L 10 2 z M 5 7 L 5 20 C 5 21.1 5.9 22 7 22 L 17 22 C 18.1 22 19 21.1 19 20 L 19 7 L 5 7 z" />
                </svg>
              </span>
            </a>
          </li>
        </ol>
      </div>
      <div class='front'>
        <img class='art' [src]="currentCoverUrl">
        <div class='bar'>
          <hr [style.margin-left.px]="barMarginLeft">
        </div>
        <div class='meta'>
          <time>
            <span>{{currentTime}}</span>
            <span>{{currentTotalTime}}</span>
          </time>
          <div class='controls top'>
            <a class='rewind skip' (click)="skip(-1)" [ngClass]="{'disabled': disableBackward}">
              <svg viewBox='0 0 36 20'>
                <path d='M1.69813738,11.0254725 C0.75331072,10.4595484 0.761328762,9.53720142 1.69813738,8.97607983 L16.2885768,0.236823587 C17.2334034,-0.329100579 17.9993368,0.11180583 17.9993368,1.20339155 L17.9993368,18.7981608 C17.9993368,19.8979057 17.2253854,20.3258504 16.2885768,19.7647288 L1.69813738,11.0254725 Z'></path>
                <path d='M19.6988006,8.97607983 C18.7539739,9.542004 18.761992,10.4643509 19.6988006,11.0254725 L34.28924,19.7647288 C35.2340667,20.3306529 36,19.8897465 36,18.7981608 L36,1.20339155 C36,0.103646637 35.2260486,-0.324298001 34.28924,0.236823587 L19.6988006,8.97607983 Z'></path>
              </svg>
            </a>
            <a class='play' (click)="togglePlay()" [ngClass]="{'disabled': disablePlay}">
              <svg *ngIf="!isPlayng" viewBox='0 0 36 42'>
                <path d='M35.26504,19.9918476 C36.223232,20.5486348 36.2272024,21.4490581 35.26504,22.0081524 L1.73495997,41.4918476 C0.776768039,42.0486348 0,41.6018839 0,40.4980004 L0,1.50199958 C0,0.396325744 0.772797585,-0.0509419441 1.73495997,0.508152418 L35.26504,19.9918476 Z'></path>
              </svg>
              <svg *ngIf="isPlayng" viewBox="0 0 70 70">
                <path d="M52.5,0c-4.972,0-9,1.529-9,6.5v57c0,4.971,4.028,6.5,9,6.5c4.971,0,9-1.529,9-6.5v-57 C61.5,1.529,57.471,0,52.5,0z" />
                <path d="M17.5,0c-4.972,0-9,1.529-9,6.5v57c0,4.971,4.028,6.5,9,6.5c4.971,0,9-1.529,9-6.5v-57 C26.5,1.529,22.471,0,17.5,0z" />
              </svg>
            </a>
            <a class='forward skip' (click)="skip(1)" [ngClass]="{'disabled': disableForward}">
              <svg viewBox='0 0 36 20'>
                <path d='M34.3018626,8.97607983 C35.2466893,9.542004 35.2386712,10.4643509 34.3018626,11.0254725 L19.7114232,19.7647288 C18.7665966,20.3306529 18.0006632,19.8897465 18.0006632,18.7981608 L18.0006632,1.20339155 C18.0006632,0.103646637 18.7746146,-0.324298001 19.7114232,0.236823587 L34.3018626,8.97607983 Z'></path>
                <path d='M16.3011994,8.97607983 C17.2460261,9.542004 17.238008,10.4643509 16.3011994,11.0254725 L1.71075999,19.7647288 C0.765933339,20.3306529 0,19.8897465 0,18.7981608 L0,1.20339155 C0,0.103646637 0.773951381,-0.324298001 1.71075999,0.236823587 L16.3011994,8.97607983 Z'></path>
              </svg>
            </a>
          </div>
          <div class='info'>
            <h1>{{currentTitle}}</h1>
            <h2>{{currentArtist}}</h2>
          </div>
          <div class='controls bottom'>
            <a (click)="toggleAudio()">
              <svg *ngIf="isAudio" class="audio" viewBox="0 0 93.038 93.038">
                <path d="M46.547,75.521c0,1.639-0.947,3.128-2.429,3.823c-0.573,0.271-1.187,0.402-1.797,0.402c-0.966,0-1.923-0.332-2.696-0.973
                 l-23.098-19.14H4.225C1.892,59.635,0,57.742,0,55.409V38.576c0-2.334,1.892-4.226,4.225-4.226h12.303l23.098-19.14
                 c1.262-1.046,3.012-1.269,4.493-0.569c1.481,0.695,2.429,2.185,2.429,3.823L46.547,75.521L46.547,75.521z M62.784,68.919
                 c-0.103,0.007-0.202,0.011-0.304,0.011c-1.116,0-2.192-0.441-2.987-1.237l-0.565-0.567c-1.482-1.479-1.656-3.822-0.408-5.504
                 c3.164-4.266,4.834-9.323,4.834-14.628c0-5.706-1.896-11.058-5.484-15.478c-1.366-1.68-1.24-4.12,0.291-5.65l0.564-0.565
                 c0.844-0.844,1.975-1.304,3.199-1.231c1.192,0.06,2.305,0.621,3.061,1.545c4.977,6.09,7.606,13.484,7.606,21.38
                 c0,7.354-2.325,14.354-6.725,20.24C65.131,68.216,64.007,68.832,62.784,68.919z M80.252,81.976
                 c-0.764,0.903-1.869,1.445-3.052,1.495c-0.058,0.002-0.117,0.004-0.177,0.004c-1.119,0-2.193-0.442-2.988-1.237l-0.555-0.555
                 c-1.551-1.55-1.656-4.029-0.246-5.707c6.814-8.104,10.568-18.396,10.568-28.982c0-11.011-4.019-21.611-11.314-29.847
                 c-1.479-1.672-1.404-4.203,0.17-5.783l0.554-0.555c0.822-0.826,1.89-1.281,3.115-1.242c1.163,0.033,2.263,0.547,3.036,1.417
                 c8.818,9.928,13.675,22.718,13.675,36.01C93.04,59.783,88.499,72.207,80.252,81.976z" />
              </svg>
              <svg *ngIf="!isAudio" class="audio" viewBox="0 0 347.182 347.182">
                <path d="M277.808,5.426C274.187,1.809,269.902,0,264.954,0c-4.945,0-9.233,1.809-12.847,5.426L157.034,100.5H82.233
                  c-4.952,0-9.235,1.809-12.851,5.424c-3.617,3.621-5.426,7.901-5.426,12.85v109.634c0,4.948,1.809,9.232,5.426,12.847
                  c3.619,3.617,7.902,5.428,12.851,5.428h74.798l95.07,95.077c3.62,3.61,7.904,5.421,12.847,5.421c4.955,0,9.236-1.811,12.854-5.421
                  c3.613-3.617,5.424-7.901,5.424-12.847V18.276C283.225,13.328,281.421,9.042,277.808,5.426z" />
              </svg>
            </a>
            <a>
              <svg viewBox='0 0 24 20'>
                <path d='M10.1639425,10 L5.222766,17 L1.00700182,17 C0.450850071,17 0,17.4426603 0,17.9989566 L0,19.0010434 C0,19.5527519 0.45097518,20 0.990777969,20 L6,20 C6.4873848,20 6.94438517,19.7632025 7.22545179,19.3650248 L12,12.6010815 L16.7745482,19.3650248 C17.0556148,19.7632025 17.5126152,20 18,20 L23.009222,20 C23.5564136,20 24,19.5573397 24,19.0010434 L24,17.9989566 C24,17.4472481 23.5547099,17 22.9929982,17 L18.777234,17 L13.8360575,10 L18.777234,3 L22.9929982,3 C23.5491499,3 24,2.55733967 24,2.00104344 L24,0.998956561 C24,0.447248087 23.5490248,0 23.009222,0 L18,0 C17.5126152,0 17.0556148,0.236797487 16.7745482,0.634975204 L12,7.39891849 L7.22545179,0.634975204 C6.94438517,0.236797487 6.4873848,0 6,0 L0.990777969,0 C0.443586406,0 0,0.442660332 0,0.998956561 L0,2.00104344 C0,2.55275191 0.445290091,3 1.00700182,3 L5.222766,3 L10.1639425,10 Z'></path>
              </svg>
            </a>
            <a>
              <svg viewBox='0 0 24 20'>
                <path d='M18,2.00104344 C18,2.55275191 18.4426603,3 18.9989566,3 L21,3 L21,17 L3,17 L3,3 L11.0024554,3 C11.553384,3 12,2.55733967 12,2.00104344 L12,0.998956561 C12,0.447248087 11.544239,5.68434189e-14 10.9975267,5.68434189e-14 L1.00247329,5.68434189e-14 C0.448822582,5.68434189e-14 0,0.455305576 0,0.99180311 L0,19.0081969 C0,19.5559546 0.44746922,20 1.00069463,20 L22.9993054,20 C23.5519738,20 24,19.5446944 24,19.0081969 L24,0.99180311 C24,0.444045377 23.5490248,9.4128217e-14 23.009222,9.05011945e-14 L18.990778,6.35006168e-14 C18.4435864,5.98239479e-14 18,0.442660332 18,0.998956561 L18,2.00104344 Z'></path>
              </svg>
            </a>
            <a class='flip' (click)="togglePlaylist()">
              <svg viewBox='0 0 24 20'>
                <rect height='3' rx='1' width='3'></rect>
                <rect height='3' rx='1' width='18' x='6'></rect>
                <rect height='3' rx='1' width='18' x='6' y='8.5'></rect>
                <rect height='3' rx='1' width='18' x='6' y='17'></rect>
                <rect height='3' rx='1' width='3' y='8.5'></rect>
                <rect height='3' rx='1' width='3' y='17'></rect>
              </svg>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</main>
